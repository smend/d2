function OpenWindow(a,b,c,d){var g=(screen.width-b)/2,j=(screen.height-c)/2;winprops='resizable=0, height='+c+',width='+b+',top='+j+',left='+g+'w',d&&(winprops+=',scrollbars=1');window.open(a,'_blank',winprops)}function setLocation(a){window.location.href=a}function displayAjaxLoading(a){a?$('.ajax-loading-block-window').show():$('.ajax-loading-block-window').hide('slow')}function displayPopupNotification(a,b,c){var d='success'==b?$('#dialog-notifications-success'):'error'==b?$('#dialog-notifications-error'):'warning'==b?$('#dialog-notifications-warning'):$('#dialog-notifications-success');var g='';if('string'==typeof a)g='<p>'+a+'</p>';else for(var j=0;j<a.length;j++)g=g+'<p>'+a[j]+'</p>';d.html(g);d.dialog({modal:!!c,width:350})}function displayPopupContentFromUrl(a,b,c,d){var j=d?d:550,k=$(window).height()-20;$('<div></div>').load(a).dialog({modal:!!c,position:['center',20],width:j,maxHeight:k,title:b,close:function(){$(this).dialog('destroy').remove()}})}var barNotificationTimeout;function displayBarNotification(a,b,c){clearTimeout(barNotificationTimeout);var d='success';'success'==b?d='success':'error'==b?d='error':'warning'==b&&(d='warning'),$('#bar-notification').removeClass('success').removeClass('error').removeClass('warning'),$('#bar-notification .content').remove();var g='';if('string'==typeof a)g='<p class="content">'+a+'</p>';else for(var j=0;j<a.length;j++)g=g+'<p class="content">'+a[j]+'</p>';$('#bar-notification').append(g).addClass(d).fadeIn('slow').mouseenter(function(){clearTimeout(barNotificationTimeout)}),$('#bar-notification .close').unbind('click').click(function(){$('#bar-notification').fadeOut('slow')}),0<c&&(barNotificationTimeout=setTimeout(function(){$('#bar-notification').fadeOut('slow')},c))}function htmlEncode(a){return $('<div/>').text(a).html()}function htmlDecode(a){return $('<div/>').html(a).text()}function addAntiForgeryToken(a){a||(a={});var b=$('input[name=__RequestVerificationToken]');return b.length&&(a.__RequestVerificationToken=b.val()),a}var Checkout={loadWaiting:!1,failureUrl:!1,init:function(a){this.loadWaiting=!1,this.failureUrl=a,Accordion.disallowAccessToNextSections=!0},ajaxFailure:function(){location.href=Checkout.failureUrl},_disableEnableAll:function(a,b){var c=a.find('*');$(c).each(function(){b?$(this).attr('disabled','disabled'):$(this).removeAttr('disabled')}),b?a.attr('disabled','disabled'):a.removeAttr('disabled')},setLoadWaiting:function(a,b){if(a){this.loadWaiting&&this.setLoadWaiting(!1);var c=$('#'+a+'-buttons-container');c.addClass('disabled'),c.css('opacity','.5'),this._disableEnableAll(c,!0),$('#'+a+'-please-wait').show()}else if(this.loadWaiting){var c=$('#'+this.loadWaiting+'-buttons-container'),d=!!b;d||(c.removeClass('disabled'),c.css('opacity','1')),this._disableEnableAll(c,d),$('#'+this.loadWaiting+'-please-wait').hide()}this.loadWaiting=a},gotoSection:function(a){a=$('#opc-'+a),a.addClass('allow'),Accordion.openSection(a)},back:function(){this.loadWaiting||Accordion.openPrevSection(!0,!0)},setStepResponse:function(a){return a.update_section&&$('#checkout-'+a.update_section.name+'-load').html(a.update_section.html),a.allow_sections&&a.allow_sections.each(function(b){$('#opc-'+b).addClass('allow')}),0<$('#billing-address-select').length&&Billing.newAddress(!$('#billing-address-select').val()),0<$('#shipping-address-select').length&&Shipping.newAddress(!$('#shipping-address-select').val()),a.goto_section?(Checkout.gotoSection(a.goto_section),!0):!!a.redirect&&(location.href=a.redirect,!0)}},Billing={form:!1,saveUrl:!1,disableBillingAddressCheckoutStep:!1,init:function(a,b,c){this.form=a,this.saveUrl=b,this.disableBillingAddressCheckoutStep=c},newAddress:function(a){a?(this.resetSelectedAddress(),$('#billing-new-address-form').show()):$('#billing-new-address-form').hide()},resetSelectedAddress:function(){var a=$('#billing-address-select');a&&a.val('')},save:function(){!1!=Checkout.loadWaiting||(Checkout.setLoadWaiting('billing'),$.ajax({cache:!1,url:this.saveUrl,data:$(this.form).serialize(),type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1)},nextStep:function(a){return'undefined'==typeof a.wrong_billing_address&&(a.wrong_billing_address=!1),Billing.disableBillingAddressCheckoutStep&&(a.wrong_billing_address?Accordion.showSection('#opc-billing'):Accordion.hideSection('#opc-billing')),a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):void Checkout.setStepResponse(a)}},Shipping={form:!1,saveUrl:!1,init:function(a,b){this.form=a,this.saveUrl=b},newAddress:function(a){a?(this.resetSelectedAddress(),$('#shipping-new-address-form').show()):$('#shipping-new-address-form').hide()},togglePickUpInStore:function(a){a.checked?($('#pickup-points-form').show(),$('#shipping-addresses-form').hide()):($('#pickup-points-form').hide(),$('#shipping-addresses-form').show())},resetSelectedAddress:function(){var a=$('#shipping-address-select');a&&a.val('')},save:function(){!1!=Checkout.loadWaiting||(Checkout.setLoadWaiting('shipping'),$.ajax({cache:!1,url:this.saveUrl,data:$(this.form).serialize(),type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1)},nextStep:function(a){return a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):void Checkout.setStepResponse(a)}},ShippingMethod={form:!1,saveUrl:!1,init:function(a,b){this.form=a,this.saveUrl=b},validate:function(){var a=document.getElementsByName('shippingoption');if(0==a.length)return alert('Your order cannot be completed at this time as there is no shipping methods available for it. Please make necessary changes in your shipping address.'),!1;for(var b=0;b<a.length;b++)if(a[b].checked)return!0;return alert('Please specify shipping method.'),!1},save:function(){!1!=Checkout.loadWaiting||this.validate()&&(Checkout.setLoadWaiting('shipping-method'),$.ajax({cache:!1,url:this.saveUrl,data:$(this.form).serialize(),type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1)},nextStep:function(a){return a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):void Checkout.setStepResponse(a)}},PaymentMethod={form:!1,saveUrl:!1,init:function(a,b){this.form=a,this.saveUrl=b},toggleUseRewardPoints:function(a){a.checked?$('#payment-method-block').hide():$('#payment-method-block').show()},validate:function(){var a=document.getElementsByName('paymentmethod');if(0==a.length)return alert('Your order cannot be completed at this time as there is no payment methods available for it.'),!1;for(var b=0;b<a.length;b++)if(a[b].checked)return!0;return alert('Please specify payment method.'),!1},save:function(){!1!=Checkout.loadWaiting||this.validate()&&(Checkout.setLoadWaiting('payment-method'),$.ajax({cache:!1,url:this.saveUrl,data:$(this.form).serialize(),type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1)},nextStep:function(a){return a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):void Checkout.setStepResponse(a)}},PaymentInfo={form:!1,saveUrl:!1,init:function(a,b){this.form=a,this.saveUrl=b},save:function(){!1!=Checkout.loadWaiting||(Checkout.setLoadWaiting('payment-info'),$.ajax({cache:!1,url:this.saveUrl,data:$(this.form).serialize(),type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1)},nextStep:function(a){return a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):void Checkout.setStepResponse(a)}},ConfirmOrder={form:!1,saveUrl:!1,isSuccess:!1,init:function(a,b){this.saveUrl=a,this.successUrl=b},save:function(){if(!1==Checkout.loadWaiting){var a=!0;return 0<$('#termsofservice').length&&($('#termsofservice').is(':checked')?a=!0:($('#terms-of-service-warning-box').dialog(),a=!1)),!!a&&void(Checkout.setLoadWaiting('confirm-order'),$.ajax({cache:!1,url:this.saveUrl,type:'post',success:this.nextStep,complete:this.resetLoadWaiting,error:Checkout.ajaxFailure}))}},resetLoadWaiting:function(){Checkout.setLoadWaiting(!1,ConfirmOrder.isSuccess)},nextStep:function(a){return a.error?('string'==typeof a.message?alert(a.message):alert(a.message.join('\n')),!1):a.redirect?(ConfirmOrder.isSuccess=!0,void(location.href=a.redirect)):void(a.success&&(ConfirmOrder.isSuccess=!0,window.location=ConfirmOrder.successUrl),Checkout.setStepResponse(a))}};var AjaxCart={loadWaiting:!1,usepopupnotifications:!1,topcartselector:'',topwishlistselector:'',flyoutcartselector:'',init:function(a,b,c,d){this.loadWaiting=!1,this.usepopupnotifications=a,this.topcartselector=b,this.topwishlistselector=c,this.flyoutcartselector=d},setLoadWaiting:function(a){displayAjaxLoading(a),this.loadWaiting=a},addproducttocart_catalog:function(a){!1!=this.loadWaiting||(this.setLoadWaiting(!0),$.ajax({cache:!1,url:a,type:'post',success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure}))},weightSender_productBox:function(a){console.log(a),addproducttocart_catalog_Weight(a)},addproducttocart_catalog_Weight:function(a,b,z){if(!1==this.loadWaiting){this.setLoadWaiting(!0);var c='#'+a.toString(),d=parseFloat(document.getElementById(a).innerHTML),g=parseInt(a.split('-')[1]);document.getElementById(a).innerHTML = z;$.ajax({cache:!1,url:b,type:'post',data:{productId:g,shoppingCartTypeId:1,decQuantity:d},dataType:'json',success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure})}},increaseQuantityInput:function(a,b){var c='#'+b,d=+$(c).val(),g=d+parseInt(a);console.log(d),$(c).val(g),$(c).prop('readonly',!0)},reduceQuantityInput:function(a,b){var c='#'+b,d=+$(c).val();if(0<d){var g=d-parseInt(a);$(c).val(g)}},increaseQuantityFlyOutCart:function(a,b){var c='#'+a,d=+$(c).html(),g=d+parseInt(b);$(c).html(g)},reduceQuantityFlyOutCart:function(a,b){var c='#'+a,d=+$(c).html();if(0<d){var g=d-parseInt(b);$(c).html(g)}},increaseQuantityCart:function(a,b){var c='#'+a;console.log('old cart'+b);var d=+$(c).html(),g=d+parseInt(b);console.log('old cart'+g),$(c).html(g)},reduceQuantityCart:function(a,b){var c='#'+a,d=+$(c).html();if(0<d){console.log('old weighy'+b);var g=d-parseInt(b);console.log('new weighy'+g),$(c).value(g)}},pick_flyCart_weight(a){var c=$('#'+a).html();0<=c&&this.addproducttocart_flyOutCart_Weight(a,c)},addproducttocart_flyOutCart_Weight:function(a,b){if(!1==this.loadWaiting){var c=parseFloat(b),d=parseInt(a.split('-')[1]),g={sciIdfromClient:d,shoppingCartTypeId:1,decQuantity:c};console.log(g),$.ajax({cache:!1,url:'/ShoppingCart/AddProductToCart_FlyOutCart_Weight',type:'post',data:g,dataType:'json',success:this.success_process,error:this.ajaxFailure})}},addproducttocart_details:function(a,b){!1!=this.loadWaiting||(this.setLoadWaiting(!0),$.ajax({cache:!1,url:a,data:$(b).serialize(),type:'post',success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure}))},addproducttocomparelist:function(a){!1!=this.loadWaiting||(this.setLoadWaiting(!0),$.ajax({cache:!1,url:a,type:'post',success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure}))},success_process:function(a){return a.updatetopcartsectionhtml&&$(AjaxCart.topcartselector).html(a.updatetopcartsectionhtml),a.updatetopwishlistsectionhtml&&$(AjaxCart.topwishlistselector).html(a.updatetopwishlistsectionhtml),a.updateflyoutcartsectionhtml&&$(AjaxCart.flyoutcartselector).replaceWith(a.updateflyoutcartsectionhtml),a.message?(!0==a.success?!0==AjaxCart.usepopupnotifications?displayPopupNotification(a.message,'success',!0):displayBarNotification(a.message,'success',3500):!0==AjaxCart.usepopupnotifications?displayPopupNotification(a.message,'error',!0):displayBarNotification(a.message,'error',0),!1):!!a.redirect&&(location.href=a.redirect,!0)},resetLoadWaiting:function(){AjaxCart.setLoadWaiting(!1)},ajaxFailure:function(){alert('Failed to add the product. Please refresh the page and try one more time.')}};